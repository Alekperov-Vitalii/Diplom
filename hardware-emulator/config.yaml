# ESP32 Emulator Configuration

# Network Settings
fog_server:
  host: "localhost" # IP fog-сервера (пока localhost, потом поменяем если нужно)
  port: 8001
  endpoint: "/api/v1/telemetry" # Куда отправлять данные

# Device Settings
device:
  id: "esp32_master_001" # Уникальный идентификатор этого ESP32
  gpu_count: 16 # Количество видеокарт (расширено с 8 до 16)
# Secondary Device: Environment Monitor
secondary_device:
  id: "esp32_env_001"
  enabled: true

# Environment Profiles
environment_profiles:
  enabled: true
  current_profile: "dusty_workshop" # standard_office, dusty_workshop, clean_room, dry_static
  profiles:
    standard_office:
      target_humidity: 45.0
      target_dust: 10.0
      ventilation_rate: 0.5
    dusty_workshop:
      target_humidity: 60.0
      target_dust: 150.0
      ventilation_rate: 0.8
    clean_room:
      target_humidity: 40.0
      target_dust: 0.0
      ventilation_rate: 1.0 # MAX HEPA FILTRATION
    dry_static:
      target_humidity: 20.0 # DANGER
      target_dust: 5.0
      ventilation_rate: 0.3

# Sensors Configuration
sensors:
  sensor_read_interval: 5 # Как часто читаем датчики (5 сек)
  data_send_interval: 30 # Как часто отправляем данные (30 сек)

# Timing Settings (в секундах)
timing:
  sensor_read_interval: 5
  data_send_interval: 30

# Temperature Simulation Parameters
simulation:
  room_temp:
    base: 24.0 # Базовая температура помещения (°C)
    variation: 2.0 # Вариация (комната медленно нагревается)

  gpu_temp:
    idle_min: 35.0 # Минимальная температура GPU в простое
    idle_max: 45.0 # Максимальная температура GPU в простое
    load_min: 60.0 # Температура под нагрузкой (минимум)
    load_max: 85.0 # Температура под нагрузкой (максимум)
    heating_rate: 2.0 # Скорость нагрева (°C/сек)
    cooling_rate: 1.5 # Скорость охлаждения (°C/сек)

  sensor_noise: 0.3 # Шум датчика DS18B20 (±0.3°C)

# Fan Simulation
fans:
  rpm_min: 800 # Минимальные обороты (вентилятор не выключается)
  rpm_max: 5000 # Максимальные обороты
  pwm_to_rpm_factor: 40 # Коэффициент: RPM = PWM * factor

# Workload Simulation (случайная нагрузка на GPU)
workload:
  enabled: true # Включить симуляцию нагрузки
  change_probability: 0.3 # Вероятность изменения нагрузки (10% каждый цикл)
  high_load_probability: 0.8 # Вероятность высокой нагрузки

# ML Workload Profiles (реалистичная симуляция датацентра)
workload_profiles:
  datacenter_ml:
    enabled: true # Включить ML профили (если false, используется старая логика)

    # Группа 1: GPU 1-8 (Distributed Training)
    group_1:
      gpus: [1, 2, 3, 4, 5, 6, 7, 8]
      profile: "training"
      epoch_duration: 300 # Длительность эпохи обучения (секунды)
      validation_interval: 60 # Интервал валидации (секунды)

    # Группа 2: GPU 9-16 (Inference Serving)
    group_2:
      gpus: [9, 10, 11, 12, 13, 14, 15, 16]
      profile: "inference"
      base_load: 0.6 # Базовая нагрузка (60%)
      load_variation: 0.2 # Вариация нагрузки (±20%)

# Sensors Configuration
sensors:
  temperature:
    type: "DS18B20"
    noise_std: 0.3 # Стандартное отклонение шума (°C)
    resolution: 0.1 # Разрешение датчика (°C)
